#' CoinAPI Market Data REST API
#'
#' No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
#'
#' The version of the OpenAPI document: v1
#' Contact: support@apibricks.io
#' Generated by: https://openapi-generator.tech
#'
#' @docType class
#' @title Trades operations
#' @description TradesApi
#' @format An \code{R6Class} generator object
#' @field api_client Handles the client-server communication.
#'
#' @examples
#' \dontrun{
#' ####################  V1TradesLatestGet  ####################
#'
#' library(openapi)
#' var_filter_symbol_id <- "filter_symbol_id_example" # character | Comma or semicolon delimited parts of symbol identifier used to filter response. (optional) (Optional)
#' var_include_id <- FALSE # character | Information that additional exchange trade identifier should be included in the `id_trade` parameter of the trade if exchange providing identifiers. (Optional)
#' var_limit <- 100 # integer | Amount of items to return (optional, mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (Optional)
#'
#' #Latest data
#' api_instance <- TradesApi$new()
#'
#' # Configure API key authorization: APIKey
#' api_instance$api_client$api_keys["Authorization"] <- Sys.getenv("API_KEY")
#'
#' # Configure HTTP bearer authorization: JWT
#' api_instance$api_client$bearer_token <- Sys.getenv("BEARER_TOKEN")
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$V1TradesLatestGet(filter_symbol_id = var_filter_symbol_id, include_id = var_include_id, limit = var_limitdata_file = "result.txt")
#' result <- api_instance$V1TradesLatestGet(filter_symbol_id = var_filter_symbol_id, include_id = var_include_id, limit = var_limit)
#' dput(result)
#'
#'
#' ####################  V1TradesSymbolIdHistoryGet  ####################
#'
#' library(openapi)
#' var_symbol_id <- "symbol_id_example" # character | Symbol identifier for requested timeseries (from the Metadata -> Symbols)
#' var_date <- "date_example" # character | Date in ISO 8601, returned data is for the whole given day (required if 'time_start' is not provided) (Optional)
#' var_time_start <- "time_start_example" # character | Starting time in ISO 8601 (Optional)
#' var_time_end <- "time_end_example" # character | Timeseries ending time in ISO 8601 (Optional)
#' var_limit <- 100 # integer | Amount of items to return (optional, minimum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (Optional)
#' var_include_id <- FALSE # character | Information that additional exchange trade identifier should be included in the `id_trade` parameter of the trade if exchange providing identifiers. (Optional)
#'
#' #Historical data
#' api_instance <- TradesApi$new()
#'
#' # Configure API key authorization: APIKey
#' api_instance$api_client$api_keys["Authorization"] <- Sys.getenv("API_KEY")
#'
#' # Configure HTTP bearer authorization: JWT
#' api_instance$api_client$bearer_token <- Sys.getenv("BEARER_TOKEN")
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$V1TradesSymbolIdHistoryGet(var_symbol_id, date = var_date, time_start = var_time_start, time_end = var_time_end, limit = var_limit, include_id = var_include_iddata_file = "result.txt")
#' result <- api_instance$V1TradesSymbolIdHistoryGet(var_symbol_id, date = var_date, time_start = var_time_start, time_end = var_time_end, limit = var_limit, include_id = var_include_id)
#' dput(result)
#'
#'
#' ####################  V1TradesSymbolIdLatestGet  ####################
#'
#' library(openapi)
#' var_symbol_id <- "symbol_id_example" # character | Symbol identifier for requested timeseries (from the Metadata -> Symbols)
#' var_limit <- 100 # integer | Amount of items to return (optional, mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (Optional)
#' var_include_id <- FALSE # character | Information that additional exchange trade identifier should be included in the `id_trade` parameter of the trade if exchange providing identifiers. (Optional)
#'
#' #Latest data by symbol_id
#' api_instance <- TradesApi$new()
#'
#' # Configure API key authorization: APIKey
#' api_instance$api_client$api_keys["Authorization"] <- Sys.getenv("API_KEY")
#'
#' # Configure HTTP bearer authorization: JWT
#' api_instance$api_client$bearer_token <- Sys.getenv("BEARER_TOKEN")
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$V1TradesSymbolIdLatestGet(var_symbol_id, limit = var_limit, include_id = var_include_iddata_file = "result.txt")
#' result <- api_instance$V1TradesSymbolIdLatestGet(var_symbol_id, limit = var_limit, include_id = var_include_id)
#' dput(result)
#'
#'
#' }
#' @importFrom R6 R6Class
#' @importFrom base64enc base64encode
#' @export
TradesApi <- R6::R6Class(
  "TradesApi",
  public = list(
    api_client = NULL,

    #' @description
    #' Initialize a new TradesApi.
    #'
    #' @param api_client An instance of API client.
    initialize = function(api_client) {
      if (!missing(api_client)) {
        self$api_client <- api_client
      } else {
        self$api_client <- ApiClient$new()
      }
    },

    #' @description
    #' Latest data
    #'
    #' @param filter_symbol_id (optional) Comma or semicolon delimited parts of symbol identifier used to filter response. (optional)
    #' @param include_id (optional) Information that additional exchange trade identifier should be included in the `id_trade` parameter of the trade if exchange providing identifiers. (default value: FALSE)
    #' @param limit (optional) Amount of items to return (optional, mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return array[V1Trade]
    V1TradesLatestGet = function(filter_symbol_id = NULL, include_id = FALSE, limit = 100, data_file = NULL, ...) {
      local_var_response <- self$V1TradesLatestGetWithHttpInfo(filter_symbol_id, include_id, limit, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Latest data
    #'
    #' @param filter_symbol_id (optional) Comma or semicolon delimited parts of symbol identifier used to filter response. (optional)
    #' @param include_id (optional) Information that additional exchange trade identifier should be included in the `id_trade` parameter of the trade if exchange providing identifiers. (default value: FALSE)
    #' @param limit (optional) Amount of items to return (optional, mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (array[V1Trade]) with additional information such as HTTP status code, headers
    V1TradesLatestGetWithHttpInfo = function(filter_symbol_id = NULL, include_id = FALSE, limit = 100, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE




      query_params[["filter_symbol_id"]] <- `filter_symbol_id`

      query_params[["include_id"]] <- `include_id`

      query_params[["limit"]] <- `limit`

      local_var_url_path <- "/v1/trades/latest"
      # API key authentication
      if ("Authorization" %in% names(self$api_client$api_keys) && nchar(self$api_client$api_keys["Authorization"]) > 0) {
        header_params["Authorization"] <- paste(unlist(self$api_client$api_keys["Authorization"]), collapse = "")
      }
      # Bearer token
      if (!is.null(self$api_client$bearer_token)) {
        header_params["Authorization"] <- paste("Bearer", self$api_client$bearer_token, sep = " ")
      }

      # The Accept request HTTP header
      local_var_accepts <- list("text/plain", "application/json", "text/json", "application/x-msgpack")

      # The Content-Type representation header
      local_var_content_types <- list()

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "GET",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "array[V1Trade]"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    },

    #' @description
    #' Historical data
    #'
    #' @param symbol_id Symbol identifier for requested timeseries (from the Metadata -> Symbols)
    #' @param date (optional) Date in ISO 8601, returned data is for the whole given day (required if 'time_start' is not provided)
    #' @param time_start (optional) Starting time in ISO 8601
    #' @param time_end (optional) Timeseries ending time in ISO 8601
    #' @param limit (optional) Amount of items to return (optional, minimum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param include_id (optional) Information that additional exchange trade identifier should be included in the `id_trade` parameter of the trade if exchange providing identifiers. (default value: FALSE)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return array[V1Trade]
    V1TradesSymbolIdHistoryGet = function(symbol_id, date = NULL, time_start = NULL, time_end = NULL, limit = 100, include_id = FALSE, data_file = NULL, ...) {
      local_var_response <- self$V1TradesSymbolIdHistoryGetWithHttpInfo(symbol_id, date, time_start, time_end, limit, include_id, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Historical data
    #'
    #' @param symbol_id Symbol identifier for requested timeseries (from the Metadata -> Symbols)
    #' @param date (optional) Date in ISO 8601, returned data is for the whole given day (required if 'time_start' is not provided)
    #' @param time_start (optional) Starting time in ISO 8601
    #' @param time_end (optional) Timeseries ending time in ISO 8601
    #' @param limit (optional) Amount of items to return (optional, minimum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param include_id (optional) Information that additional exchange trade identifier should be included in the `id_trade` parameter of the trade if exchange providing identifiers. (default value: FALSE)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (array[V1Trade]) with additional information such as HTTP status code, headers
    V1TradesSymbolIdHistoryGetWithHttpInfo = function(symbol_id, date = NULL, time_start = NULL, time_end = NULL, limit = 100, include_id = FALSE, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE

      if (missing(`symbol_id`)) {
        stop("Missing required parameter `symbol_id`.")
      }







      query_params[["date"]] <- `date`

      query_params[["time_start"]] <- `time_start`

      query_params[["time_end"]] <- `time_end`

      query_params[["limit"]] <- `limit`

      query_params[["include_id"]] <- `include_id`

      local_var_url_path <- "/v1/trades/{symbol_id}/history"
      if (!missing(`symbol_id`)) {
        local_var_url_path <- gsub("\\{symbol_id\\}", URLencode(as.character(`symbol_id`), reserved = TRUE), local_var_url_path)
      }

      # API key authentication
      if ("Authorization" %in% names(self$api_client$api_keys) && nchar(self$api_client$api_keys["Authorization"]) > 0) {
        header_params["Authorization"] <- paste(unlist(self$api_client$api_keys["Authorization"]), collapse = "")
      }
      # Bearer token
      if (!is.null(self$api_client$bearer_token)) {
        header_params["Authorization"] <- paste("Bearer", self$api_client$bearer_token, sep = " ")
      }

      # The Accept request HTTP header
      local_var_accepts <- list("text/plain", "application/json", "text/json", "application/x-msgpack")

      # The Content-Type representation header
      local_var_content_types <- list()

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "GET",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "array[V1Trade]"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    },

    #' @description
    #' Latest data by symbol_id
    #'
    #' @param symbol_id Symbol identifier for requested timeseries (from the Metadata -> Symbols)
    #' @param limit (optional) Amount of items to return (optional, mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param include_id (optional) Information that additional exchange trade identifier should be included in the `id_trade` parameter of the trade if exchange providing identifiers. (default value: FALSE)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return array[V1Trade]
    V1TradesSymbolIdLatestGet = function(symbol_id, limit = 100, include_id = FALSE, data_file = NULL, ...) {
      local_var_response <- self$V1TradesSymbolIdLatestGetWithHttpInfo(symbol_id, limit, include_id, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Latest data by symbol_id
    #'
    #' @param symbol_id Symbol identifier for requested timeseries (from the Metadata -> Symbols)
    #' @param limit (optional) Amount of items to return (optional, mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param include_id (optional) Information that additional exchange trade identifier should be included in the `id_trade` parameter of the trade if exchange providing identifiers. (default value: FALSE)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (array[V1Trade]) with additional information such as HTTP status code, headers
    V1TradesSymbolIdLatestGetWithHttpInfo = function(symbol_id, limit = 100, include_id = FALSE, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE

      if (missing(`symbol_id`)) {
        stop("Missing required parameter `symbol_id`.")
      }




      query_params[["limit"]] <- `limit`

      query_params[["include_id"]] <- `include_id`

      local_var_url_path <- "/v1/trades/{symbol_id}/latest"
      if (!missing(`symbol_id`)) {
        local_var_url_path <- gsub("\\{symbol_id\\}", URLencode(as.character(`symbol_id`), reserved = TRUE), local_var_url_path)
      }

      # API key authentication
      if ("Authorization" %in% names(self$api_client$api_keys) && nchar(self$api_client$api_keys["Authorization"]) > 0) {
        header_params["Authorization"] <- paste(unlist(self$api_client$api_keys["Authorization"]), collapse = "")
      }
      # Bearer token
      if (!is.null(self$api_client$bearer_token)) {
        header_params["Authorization"] <- paste("Bearer", self$api_client$bearer_token, sep = " ")
      }

      # The Accept request HTTP header
      local_var_accepts <- list("text/plain", "application/json", "text/json", "application/x-msgpack")

      # The Content-Type representation header
      local_var_content_types <- list()

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "GET",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "array[V1Trade]"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    }
  )
)
